apiVersion: template.openshift.io/v1
kind: Template
objects:

- apiVersion: v1
  kind: Secret
  metadata:
    annotations:
      template.openshift.io/expose-database_name: '{.data[''database-name'']}'
      template.openshift.io/expose-password: '{.data[''database-password'']}'
      template.openshift.io/expose-username: '{.data[''database-user'']}'
    name: cas-ggircs-postgres
  stringData:
    database-name: ${GGIRCS_DATABASE}
    database-password: ${GGIRCS_PASSWORD}
    database-user: ${GGIRCS_USER}

parameters:

- description: Username for PostgreSQL user that will be used for accessing the database.
  displayName: PostgreSQL Connection Username
  from: user[A-Z0-9]{3}
  generate: expression
  name: GGIRCS_USER
  required: true
- description: Password for the PostgreSQL connection user.
  displayName: PostgreSQL Connection Password
  from: '[a-zA-Z0-9]{16}'
  generate: expression
  name: GGIRCS_PASSWORD
  required: true
- description: Name of the PostgreSQL database accessed.
  displayName: PostgreSQL Database Name
  name: GGIRCS_DATABASE
  required: true
  value: ggircs

